"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e,n){return new Proxy(e,{get(e,r,o){const c=Reflect.get(e,r,o);return null!==(u=c)&&"object"==typeof u?t(c,n):c;var u},set(e,t,r,o){const c=Reflect.get(e,t,o);return Object.is(c,r)||(Reflect.set(e,t,r,o),function(e){let t=0;return function(){t&&cancelAnimationFrame(t),t=requestAnimationFrame(e)}}(n)()),!0}})}exports.createReactiveStore=function(n){let r=n,o=new Set;const c=t(r,(()=>{o.forEach((e=>e()))}));return function(t){const[,n]=e.useReducer((e=>(e+1)%1e3),0);return console.log("run useStore "+t),o.has(n)||(console.log("push update"),o.add(n)),e.useEffect((()=>()=>{o.delete(n)}),[]),c}},exports.createStore=function(t){let n=t,r=new Set;const o=e=>{n={...n,...e},r.forEach((e=>e(n)))};return function(){const[t,c]=e.useState(n);return r.has(c)||r.add(c),e.useEffect((()=>()=>{r.delete(c)}),[]),[t,o]}};
